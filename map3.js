var ramp=d3.scale.linear().domain([0,250,33000]).range(["lightblue","blue", "darkblue"]);

var basic_choropleth = new Datamap({
  element: document.getElementById("svg_map3"),
    scope: 'world',
    // Zoom in on Africa
    //setProjection: function(element) {
      //var projection = d3.geo.equirectangular()
        //.center([23, -3])
        //.rotate([4.4, 0])
        //.scale(400)
        //.translate([element.offsetWidth / 2, element.offsetHeight / 2]);
      //var path = d3.geo.path()
        //.projection(projection);
      //return {path: path, projection: projection};
    //},
  //element: document.getElementById("svg_map"),
  projection: 'mercator',
  fills: {
    defaultFill: "#CCCCCC",
    AFG: ramp(32756),
    AGO: ramp(1388),
    ALB: ramp(7),
    ARE: ramp(1),
    ARG: ramp(0),
    ARM: ramp(16),
    AUS: ramp(6),
    AUT: ramp(1),
    AZE: ramp(8),
    BDI: ramp(1007),
    BEL: ramp(41),
    BEN: ramp(0),
    BFA: ramp(79),
    BGD: ramp(492),
    BGR: ramp(13),
    BHR: ramp(23),
    BHS: ramp(0),
    BIH: ramp(10),
    BLR: ramp(13),
    BLZ: ramp(0),
    BOL: ramp(0),
    BRA: ramp(12),
    BTN: ramp(9),
    BWA: ramp(1),
    CAF: ramp(1378),
    CAN: ramp(8),
    CHE: ramp(14),
    CHL: ramp(3),
    CHN: ramp(829),
    CIV: ramp(214),
    CMR: ramp(2011),
    COD: ramp(3385),
    COG: ramp(168),
    COL: ramp(3056),
    CRI: ramp(1),
    CUB: ramp(1),
    CYP: ramp(0),
    CZE: ramp(2),
    DEU: ramp(43),
    DJI: ramp(5),
    DMA: ramp(1),
    DNK: ramp(3),
    DOM: ramp(0),
    DZA: ramp(4146),
    ECU: ramp(2),
    EGY: ramp(2201),
    ERI: ramp(40),
    ESH: ramp(0),
    ESP: ramp(252),
    EST: ramp(2),
    ETH: ramp(662),
    FIN: ramp(9),
    FJI: ramp(7),
    FRA: ramp(274),
    GBR: ramp(106),
    GEO: ramp(55),
    GHA: ramp(0),
    GIN: ramp(208),
    GMB: ramp(0),
    GNB: ramp(17),
    GNQ: ramp(1),
    GRC: ramp(76),
    GTM: ramp(21),
    GUY: ramp(33),
    HKG: ramp(0),
    HND: ramp(39),
    HRV: ramp(3),
    HTI: ramp(30),
    HUN: ramp(3),
    IDN: ramp(870),
    IND: ramp(9969),
    IRL: ramp(4),
    IRN: ramp(464),
    IRQ: ramp(70436),
    ISL: ramp(0),
    ISR: ramp(971),
    ITA: ramp(5),
    JAM: ramp(0),
    JOR: ramp(112),
    JPN: ramp(19),
    KAZ: ramp(28),
    KEN: ramp(1305),
    KGZ: ramp(10),
    KHM: ramp(23),
    KOR: ramp(0),
    KWT: ramp(38),
    LAO: ramp(3.890160183),
    LBN: ramp(14.5851444),
    LBR: ramp(4.91687301),
    LBY: ramp(16.16093314),
    LCA: ramp(0),
    LIE: ramp(2.288984263),
    LKA: ramp(3.409268217),
    LSO: ramp(2.332361516),
    LTU: ramp(3.168816601),
    LUX: ramp(3.488745981),
    LVA: ramp(3.096291256),
    MAR: ramp(9.086778737),
    MCO: ramp(0.989731535),
    MDA: ramp(3.746770026),
    MDG: ramp(2.248454188),
    MDV: ramp(5.12995896),
    MEX: ramp(3.074765347),
    MHL: ramp(6.622516556),
    MLI: ramp(7.973333333),
    MLT: ramp(3.239399526),
    MMR: ramp(5.232118554),
    MNG: ramp(2.211874272),
    MOZ: ramp(3.88384755),
    MRT: ramp(8.602150538),
    MSR: ramp(2.631578947),
    MTQ: ramp(1.173020528),
    MUS: ramp(3.426573427),
    MWI: ramp(2.393095332),
    MYS: ramp(6.423483174),
    NAM: ramp(1.682582992),
    NCL: ramp(1.421800948),
    NER: ramp(8.784551306),
    NGA: ramp(5.083430345),
    NIC: ramp(6.939163498),
    NLD: ramp(3.446771379),
    NOR: ramp(3.107711222),
    NPL: ramp(3.221957041),
    NRU: ramp(6.462585034),
    NZL: ramp(1.448489543),
    OMN: ramp(11.06145251),
    PAK: ramp(15.80098251),
    PAN: ramp(4.500818331),
    PER: ramp(2.94426919),
    PHL: ramp(7.390165842),
    PLW: ramp(5),
    PNG: ramp(2.995780591),
    POL: ramp(3.417608234),
    PRI: ramp(2.821316614),
    PRK: ramp(12.0017764),
    PRT: ramp(1.783573141),
    PRY: ramp(1.86770428),
    PYF: ramp(1.657458564),
    QAT: ramp(8.095933772),
    ROU: ramp(3.071353498),
    RUS: ramp(7.250341997),
    RWA: ramp(5.917501928),
    SAU: ramp(18.97015234),
    SDN: ramp(10.17757121),
    SEN: ramp(2.717948718),
    SGP: ramp(3.566808353),
    SLB: ramp(3.736263736),
    SLE: ramp(6.127241674),
    SLV: ramp(4.747948417),
    SMR: ramp(0.447761194),
    SOM: ramp(18.60239405),
    SRB: ramp(3.985419198),
    SUR: ramp(1.315789474),
    SVK: ramp(2.378330764),
    SVN: ramp(2.254579615),
    SWE: ramp(2.277185501),
    SWZ: ramp(3.823529412),
    SYC: ramp(3.03712036),
    SYR: ramp(19.37782483),
    TCA: ramp(3.806228374),
    TCD: ramp(4.493814693),
    TGO: ramp(2.602854744),
    THA: ramp(3.678202573),
    TJK: ramp(16.2901308),
    TKM: ramp(9.625668449),
    TON: ramp(1.312036509),
    TTO: ramp(1.252408478),
    TUN: ramp(12.59890444),
    TUR: ramp(7.866618148),
    TUV: ramp(3.459119497),
    TWN: ramp(3.805364941),
    TZA: ramp(7.594936709),
    UGA: ramp(3.937007874),
    UKR: ramp(5.31064885),
    URY: ramp(1.540383014),
    USA: ramp(9.668174213),
    UZB: ramp(14.83808603),
    VEN: ramp(4.793498093),
    VGB: ramp(3.052866716),
    VIR: ramp(3.052866716),
    VNM: ramp(7.223876814),
    VUT: ramp(3.233256351),
    WSM: ramp(0.800336984),
    YEM: ramp(28.31284153),
    ZAF: ramp(2.121461592),
    ZMB: ramp(0.542691751),
    ZWE: ramp(4.072329433),
    KNA: ramp(2),
    STP: ramp(4.285714286),
    ANT: ramp(1.587301587),
    MAC: ramp(1.43472023),
    MKD: ramp(4.560342656),
    PSE: ramp(12.33127431),
    TMP: ramp(9.728096677),
    SSD: ramp(5.5),





  },
  data: {
    AFG: { fillKey:	"AFG", percentage:	"32,756"},
    AGO: { fillKey:	"AGO", percentage:	"1,388"},
    ALB: { fillKey:	"ALB", percentage:	"7"},
    ARE: { fillKey:	"ARE", percentage:	"1"},
    ARG: { fillKey:	"ARG", percentage:	"0"},
    ARM: { fillKey:	"ARM", percentage:	"16"},
    AUS: { fillKey:	"AUS", percentage:	"6"},
    AUT: { fillKey:	"AUT", percentage:	"1"},
    AZE: { fillKey:	"AZE", percentage:	"8"},
    BDI: { fillKey:	"BDI", percentage:	"1,007"},
    BEL: { fillKey:	"BEL", percentage:	"41"},
    BEN: { fillKey:	"BEN", percentage:	"0"},
    BFA: { fillKey:	"BFA", percentage:	"79"},
    BGD: { fillKey:	"BGD", percentage:	"492"},
    BGR: { fillKey:	"BGR", percentage:	"13"},
    BHR: { fillKey:	"BHR", percentage:	"23"},
    BHS: { fillKey:	"BHS", percentage:	"0"},
    BIH: { fillKey:	"BIH", percentage:	"10"},
    BLR: { fillKey:	"BLR", percentage:	"13"},
    BLZ: { fillKey:	"BLZ", percentage:	"0"},
    BOL: { fillKey:	"BOL", percentage:	"0"},
    BRA: { fillKey:	"BRA", percentage:	"12"},
    BTN: { fillKey:	"BTN", percentage:	"9"},
    BWA: { fillKey:	"BWA", percentage:	"1"},
    CAF: { fillKey:	"CAF", percentage:	"1,378"},
    CAN: { fillKey:	"CAN", percentage:	"8"},
    CHE: { fillKey:	"CHE", percentage:	"14"},
    CHL: { fillKey:	"CHL", percentage:	"3"},
    CHN: { fillKey:	"CHN", percentage:	"829"},
    CIV: { fillKey:	"CIV", percentage:	"214"},
    CMR: { fillKey:	"CMR", percentage:	"2011"},
    COD: { fillKey:	"COD", percentage:	"3385"},
    COG: { fillKey:	"COG", percentage:	"168"},
    COL: { fillKey:	"COL", percentage:	"3,056"},
    CRI: { fillKey:	"CRI", percentage:	"1"},
    CUB: { fillKey:	"CUB", percentage:	"1"},
    CYP: { fillKey:	"CYP", percentage:	"0"},
    CZE: { fillKey:	"CZE", percentage:	"2"},
    DEU: { fillKey:	"DEU", percentage:	"43"},
    DJI: { fillKey:	"DJI", percentage:	"5"},
    DMA: { fillKey:	"DMA", percentage:	"1"},
    DNK: { fillKey:	"DNK", percentage:	"3"},
    DOM: { fillKey:	"DOM", percentage:	"0"},
    DZA: { fillKey:	"DZA", percentage:	"4,146"},
    ECU: { fillKey:	"ECU", percentage:	"2"},
    EGY: { fillKey:	"EGY", percentage:	"2,201"},
    ERI: { fillKey:	"ERI", percentage:	"40"},
    ESH: { fillKey:	"ESH", percentage:	"0"},
    ESP: { fillKey:	"ESP", percentage:	"252"},
    EST: { fillKey:	"EST", percentage:	"2"},
    ETH: { fillKey:	"ETH", percentage:	"662"},
    FIN: { fillKey:	"FIN", percentage:	"9"},
    FJI: { fillKey:	"FJI", percentage:	"7"},
    FRA: { fillKey:	"FRA", percentage:	"274"},
    GBR: { fillKey:	"GBR", percentage:	"106"},
    GEO: { fillKey:	"GEO", percentage:	"55"},
    GHA: { fillKey:	"GHA", percentage:	"0"},
    GIN: { fillKey:	"GIN", percentage:	"208"},
    GMB: { fillKey:	"GMB", percentage:	"0"},
    GNB: { fillKey:	"GNB", percentage:	"17"},
    GNQ: { fillKey:	"GNQ", percentage:	"1"},
    GRC: { fillKey:	"GRC", percentage:	"76"},
    GTM: { fillKey:	"GTM", percentage:	"21"},
    GUY: { fillKey:	"GUY", percentage:	"33"},
    HKG: { fillKey:	"HKG", percentage:	"0"},
    HND: { fillKey:	"HND", percentage:	"39"},
    HRV: { fillKey:	"HRV", percentage:	"3"},
    HTI: { fillKey:	"HTI", percentage:	"30"},
    HUN: { fillKey:	"HUN", percentage:	"3"},
    IDN: { fillKey:	"IDN", percentage:	"870"},
    IND: { fillKey:	"IND", percentage:	"9,969"},
    IRL: { fillKey:	"IRL", percentage:	"4"},
    IRN: { fillKey:	"IRN", percentage:	"464"},
    IRQ: { fillKey:	"IRQ", percentage:	"70436"},
    ISL: { fillKey:	"ISL", percentage:	"0"},
    ISR: { fillKey:	"ISR", percentage:	"971"},
    ITA: { fillKey:	"ITA", percentage:	"5"},
    JAM: { fillKey:	"JAM", percentage:	"0"},
    JOR: { fillKey:	"JOR", percentage:	"112"},
    JPN: { fillKey:	"JPN", percentage:	"19"},
    KAZ: { fillKey:	"KAZ", percentage:	"28"},
    KEN: { fillKey:	"KEN", percentage:	"1,305"},
    KGZ: { fillKey:	"KGZ", percentage:	"10"},
    KHM: { fillKey:	"KHM", percentage:	"23"},
    KOR: { fillKey:	"KOR", percentage:	"0"},
    KWT: { fillKey:	"KWT", percentage:	"38"},
    LAO: { fillKey:	"LAO", percentage:	"3.89"},
    LBN: { fillKey:	"LBN", percentage:	"14.59"},
    LBR: { fillKey:	"LBR", percentage:	"4.92"},
    LBY: { fillKey:	"LBY", percentage:	"16.16"},
    LCA: { fillKey:	"LCA", percentage:	"0.00"},
    LIE: { fillKey:	"LIE", percentage:	"2.29"},
    LKA: { fillKey:	"LKA", percentage:	"3.41"},
    LSO: { fillKey:	"LSO", percentage:	"2.33"},
    LTU: { fillKey:	"LTU", percentage:	"3.17"},
    LUX: { fillKey:	"LUX", percentage:	"3.49"},
    LVA: { fillKey:	"LVA", percentage:	"3.10"},
    MAR: { fillKey:	"MAR", percentage:	"9.09"},
    MCO: { fillKey:	"MCO", percentage:	"0.99"},
    MDA: { fillKey:	"MDA", percentage:	"3.75"},
    MDG: { fillKey:	"MDG", percentage:	"2.25"},
    MDV: { fillKey:	"MDV", percentage:	"5.13"},
    MEX: { fillKey:	"MEX", percentage:	"3.07"},
    MHL: { fillKey:	"MHL", percentage:	"6.62"},
    MLI: { fillKey:	"MLI", percentage:	"7.97"},
    MLT: { fillKey:	"MLT", percentage:	"3.24"},
    MMR: { fillKey:	"MMR", percentage:	"5.23"},
    MNG: { fillKey:	"MNG", percentage:	"2.21"},
    MOZ: { fillKey:	"MOZ", percentage:	"3.88"},
    MRT: { fillKey:	"MRT", percentage:	"8.60"},
    MSR: { fillKey:	"MSR", percentage:	"2.63"},
    MTQ: { fillKey:	"MTQ", percentage:	"1.17"},
    MUS: { fillKey:	"MUS", percentage:	"3.43"},
    MWI: { fillKey:	"MWI", percentage:	"2.39"},
    MYS: { fillKey:	"MYS", percentage:	"6.42"},
    NAM: { fillKey:	"NAM", percentage:	"1.68"},
    NCL: { fillKey:	"NCL", percentage:	"1.42"},
    NER: { fillKey:	"NER", percentage:	"8.78"},
    NGA: { fillKey:	"NGA", percentage:	"5.08"},
    NIC: { fillKey:	"NIC", percentage:	"6.94"},
    NLD: { fillKey:	"NLD", percentage:	"3.45"},
    NOR: { fillKey:	"NOR", percentage:	"3.11"},
    NPL: { fillKey:	"NPL", percentage:	"3.22"},
    NRU: { fillKey:	"NRU", percentage:	"6.46"},
    NZL: { fillKey:	"NZL", percentage:	"1.45"},
    OMN: { fillKey:	"OMN", percentage:	"11.06"},
    PAK: { fillKey:	"PAK", percentage:	"15.80"},
    PAN: { fillKey:	"PAN", percentage:	"4.50"},
    PER: { fillKey:	"PER", percentage:	"2.94"},
    PHL: { fillKey:	"PHL", percentage:	"7.39"},
    PLW: { fillKey:	"PLW", percentage:	"5.00"},
    PNG: { fillKey:	"PNG", percentage:	"3.00"},
    POL: { fillKey:	"POL", percentage:	"3.42"},
    PRI: { fillKey:	"PRI", percentage:	"2.82"},
    PRK: { fillKey:	"PRK", percentage:	"12.00"},
    PRT: { fillKey:	"PRT", percentage:	"1.78"},
    PRY: { fillKey:	"PRY", percentage:	"1.87"},
    PYF: { fillKey:	"PYF", percentage:	"1.66"},
    QAT: { fillKey:	"QAT", percentage:	"8.10"},
    ROU: { fillKey:	"ROU", percentage:	"3.07"},
    RUS: { fillKey:	"RUS", percentage:	"7.25"},
    RWA: { fillKey:	"RWA", percentage:	"5.92"},
    SAU: { fillKey:	"SAU", percentage:	"18.97"},
    SDN: { fillKey:	"SDN", percentage:	"10.18"},
    SEN: { fillKey:	"SEN", percentage:	"2.72"},
    SGP: { fillKey:	"SGP", percentage:	"3.57"},
    SLB: { fillKey:	"SLB", percentage:	"3.74"},
    SLE: { fillKey:	"SLE", percentage:	"6.13"},
    SLV: { fillKey:	"SLV", percentage:	"4.75"},
    SMR: { fillKey:	"SMR", percentage:	"0.45"},
    SOM: { fillKey:	"SOM", percentage:	"18.60"},
    SRB: { fillKey:	"SRB", percentage:	"3.99"},
    SUR: { fillKey:	"SUR", percentage:	"1.32"},
    SVK: { fillKey:	"SVK", percentage:	"2.38"},
    SVN: { fillKey:	"SVN", percentage:	"2.25"},
    SWE: { fillKey:	"SWE", percentage:	"2.28"},
    SWZ: { fillKey:	"SWZ", percentage:	"3.82"},
    SYC: { fillKey:	"SYC", percentage:	"3.04"},
    SYR: { fillKey:	"SYR", percentage:	"19.38"},
    TCA: { fillKey:	"TCA", percentage:	"3.81"},
    TCD: { fillKey:	"TCD", percentage:	"4.49"},
    TGO: { fillKey:	"TGO", percentage:	"2.60"},
    THA: { fillKey:	"THA", percentage:	"3.68"},
    TJK: { fillKey:	"TJK", percentage:	"16.29"},
    TKM: { fillKey:	"TKM", percentage:	"9.63"},
    TON: { fillKey:	"TON", percentage:	"1.31"},
    TTO: { fillKey:	"TTO", percentage:	"1.25"},
    TUN: { fillKey:	"TUN", percentage:	"12.60"},
    TUR: { fillKey:	"TUR", percentage:	"7.87"},
    TUV: { fillKey:	"TUV", percentage:	"3.46"},
    TWN: { fillKey:	"TWN", percentage:	"3.81"},
    TZA: { fillKey:	"TZA", percentage:	"7.59"},
    UGA: { fillKey:	"UGA", percentage:	"3.94"},
    UKR: { fillKey:	"UKR", percentage:	"5.31"},
    URY: { fillKey:	"URY", percentage:	"1.54"},
    USA: { fillKey:	"USA", percentage:	"9.67"},
    UZB: { fillKey:	"UZB", percentage:	"14.84"},
    VEN: { fillKey:	"VEN", percentage:	"4.79"},
    VGB: { fillKey:	"VGB", percentage:	"3.05"},
    VIR: { fillKey:	"VIR", percentage:	"3.05"},
    VNM: { fillKey:	"VNM", percentage:	"7.22"},
    VUT: { fillKey:	"VUT", percentage:	"3.23"},
    WSM: { fillKey:	"WSM", percentage:	"0.80"},
    YEM: { fillKey:	"YEM", percentage:	"28.31"},
    ZAF: { fillKey:	"ZAF", percentage:	"2.12"},
    ZMB: { fillKey:	"ZMB", percentage:	"0.54"},
    ZWE: { fillKey:	"ZWE", percentage:	"4.07"},
    KNA: { fillKey:	"KNA", percentage:	"2"},
    STP: { fillKey:	"STP", percentage:	"4.29"},
    ANT: { fillKey:	"ANT", percentage:	"1.59"},
    MAC: { fillKey:	"MAC", percentage:	"1.43"},
    MKD: { fillKey:	"MKD", percentage:	"4.56"},
    PSE: { fillKey:	"PSE", percentage:	"12.33"},
    TMP: { fillKey:	"TMP", percentage:	"9.73"},
    SSD: { fillKey:	"SSD", percentage:	"5.50"},

    //zoom.bubbles([
     //{name: 'Bubble 1', latitude: 21.32, longitude: -7.32, radius: 45, fillKey: 'gt500'},
     //{name: 'Bubble 2', latitude: 12.32, longitude: 27.32, radius: 25, fillKey: 'eq0'},
     //{name: 'Bubble 3', latitude: 0.32, longitude: 23.32, radius: 35, fillKey: 'lt25'},
     //{name: 'Bubble 4', latitude: -31.32, longitude: 23.32, radius: 55, fillKey: 'eq50'},
    //], {
     //popupTemplate: function(geo, data) {
       //return "<div class='hoverinfo'>Bubble for " + data.name + "";
     //}
    //});


  },
  geographyConfig: {
    popupTemplate: function(geo, data) {
        return ['<div class="hoverinfo"><strong>',
                'Country: ' + geo.properties.name,
                '<br> Death count: ' + data.percentage ,
                '</strong></div>'].join('');
    }
  }
});
var legend = d3.select("#svg_map3").append("svg").attr("id", "legend");
//legend.append("rect").attr("x", "200").attr("y", "10").attr("width", "20").attr("height", "20").attr("fill", "#ABDDA4");
//legend.append("text").attr("x", "225").attr("y", "24").attr("font-size", "12px").text("");
//legend.append("rect").attr("x", "350").attr("y", "10").attr("width", "20").attr("height", "20").attr("fill", "#AB55A4");
//legend.append("text").attr("x", "375").attr("y", "24").attr("font-size", "12px").text("Studied in");
